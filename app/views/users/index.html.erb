<%= render partial: '/navigation' %>

<div class="body">
  <div class="container">

    <p id="notice"></p>


    <div class="row">

      <div class="col-xs-3">
        <%= render partial: '/sideProfile', locals: {models: @side_profile_models} %>
      </div>

      <div class="col-xs-9">
        <h2>Users</h2>

        <table class="table table-hover table-inverse">
          <thead>
          <tr>
            <th>image</th>
            <th>name</th>
            <th>follow</th>
            <th></th>
            <th colspan="3"></th>
          </tr>
          </thead>

          <tbody>
          <% @users.each do |user| %>

            <tr>
              <td>
                <% if user.profile_image_id.nil? %>
                    <%= image_tag 'no_image.jpg', size: '40x40',class: 'attachment user profile_image fallback' %>
                <% else %>
                    <%= image_tag attachment_url(user, :profile_image, :fill, 50, 50, format: "jpg"),class: 'attachment user profile_image fallback'%>
                <% end %>
              </td>
              <td>
                <%= user.name %>
              </td>

              <% if user.id == current_user.id %>
                <td></td>
                <td>
                  <%= link_to 'Show', user_path(user.id) %>
                </td>
              <% elsif @follow_check[user.id] %>
                <td>
                  <%= link_to follow_path(user.id),method: :delete do %>
                    <div class="btn btn-info follow_btn_on">フォロー</div>
                  <% end %>
                </td>
                <td>
                  <%= link_to 'Show', user_path(user.id) %>
                </td>
              <% else %>
                <td>
                  <%= link_to new_follow_path(user.id) do %>
                    <div class="btn btn-info follow_btn">フォロー</div>
                  <% end %>
                </td>
                <td>
                  <%= link_to 'Show', user_path(user.id) %>
                </td>
              <% end %>

            </tr>
          <% end %>

          </tbody>

        </table>
      </div>
    </div>
  </div>
</div>

<%= render partial: '/footer' %>